 <!--##############     READ ME     ##############################################################################
#                                                                                                             
#                          READ ME BROOOOOOOüëÖüëÖüó£üó£üó£!!!                                                   
#                    
#     use find feature using Crtl + F and input what you want to find using these names:
#     
#     Header logo - change your header logo here (line 830)
#     Welcome logo - change your welcome logo here (line 1929)
#     Header area - change the header information here
#     text box - change your text box info here
#     N8N chat webhook - put your n8n link here
#     feedback button - your own feedback link here
#     show up button - your own templated buttons here
#     response area - your own templated offline response using single - double keyword maximum
#     show up buttons - change the button name here
#     N8N fetch url - put your own n8n link here to fetch the workflow
#      
#     DEVELOPER:
#        ¬© Joshua M. Narvasa 
#        ¬© Freki
#        ¬© narvasajoshua61@gmail.com
#       
#     IDEA BY:
#        ¬© Kaiser
#
################################################################################################################-->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AILA ‚Äî Interface</title>
<!-- pang markdown paragraph style -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dompurify@2.4.0/dist/purify.min.js"></script>

<!-- dito yung style sa interface no need - Joshua Narvasa -->
<style>
.dropdown-item {
  display: block;
  width: 100%;
  text-align: left;
  background: transparent;
  border: none;
  color: #e6fbff;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.12s ease;
  box-sizing: border-box;
}
.dropdown-item:hover {
  background: linear-gradient(180deg, var(--accent1), var(--accent2));
  color: #042022;
  transform: translateX(2px);
}
.faq-buttons .faq-btn {
  font-size: 12px !important;
  padding: 6px 8px !important;
  margin: 2px !important;
  white-space: nowrap;
}
.faq-buttons {
  max-height: 180px;
  overflow-y: auto;
  overflow-x: auto;
  padding-right: 4px;
}
.faq-buttons::-webkit-scrollbar {
  width: 4px;
}
.faq-buttons::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--accent2), var(--accent1));
  border-radius: 2px;
}
.header-feedback-btn {
  background: transparent;
  color: var(--muted);
  border: 1px solid rgba(255,255,255,0.04);
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.12s ease;
  font-size: 10px;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 6px;
  text-decoration: none;
}
.header-feedback-btn:hover {
  color: #e8fbff;
  border-color: rgba(255,255,255,0.15);
  background: rgba(255,255,255,0.06);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,210,255,0.1);
}
.header-feedback-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(0,210,255,0.1);
}
  :root{
    --bg1:#041428; --bg2:#07263a; --bg3:#03304a;
    --muted:#9fb6c6;
    --accent1:#00d1ff; 
    --accent2:#1dd3c9; 
    --bubble:#0b2130;
    --user:#063c3f;
    --glass: rgba(255,255,255,0.03);
    --glass-2: rgba(255,255,255,0.018);
    --success:#2fe27a;
    --danger:#ff5c6c;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }

  html,body{height:100%;margin:0;background:linear-gradient(120deg,var(--bg1),var(--bg2),var(--bg3));background-size:300% 300%;animation:grad 14s ease infinite;color:#e8fbff}
  @keyframes grad{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

  .app{display:flex;align-items:center;justify-content:center;height:100vh;padding:20px;box-sizing:border-box}

.chat {
  width: 940px; 
  max-width: 95vw;
  height: 760px; 
  max-height: 92vh;
  background: linear-gradient(180deg, var(--glass-2), rgba(255,255,255,0.006));
  border-radius: 14px; 
  box-shadow: 0 20px 60px rgba(2,8,20,0.75);
  display: flex;
  flex-direction: column;
  overflow: flex;
  border: 1px solid rgba(255,255,255,0.03);
  position: relative;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.chat.faq-hidden {
  height: 820px; 
  max-height: 95vh;
}
.chat.faq-hidden .main {
  flex: 1 1 auto;
}
.chat.faq-hidden .messages {
  max-height: 600px; 
}
.main {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}
.messages {
  flex: 1;
  padding: 20px;
  overflow: flex;
  flex-direction: column;
  display: flex;
  flex-direction: column;
  gap: 12px;
  scroll-behavior: smooth;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  max-height: 480px; 
}
.composer {
  position: sticky;
  bottom: 0;
  padding: 12px 16px;
  background: linear-gradient(180deg, rgba(3,6,10,0.9), rgba(4,8,16,0.98));
  border-top: 1px solid rgba(255,255,255,0.03);
  display: flex;
  gap: 10px;
  align-items: flex-end;
  max-width: 100%;
  box-sizing: border-box;
  flex-shrink: 0;
  z-index: 10;
}
#input {
  flex: 1;
  min-height: 32px;
  max-height: 70px;
  height: 36px;
  width: 100%;
  resize: none;
  background: rgba(255,255,255,0.02);
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.08);
  color: #e6fbff;
  font-size: 10px;
  font-family: inherit;
  line-height: 1.4;
  outline: none;
  box-sizing: border-box;
  transition: all 0.2s ease;
  overflow-y: hidden; 
}
#input:focus {
  border-color: var(--accent1);
  box-shadow: 0 0 0 3px rgba(0,210,255,0.1);
  background: rgba(255,255,255,0.04);
}
#input::placeholder {
  color: rgba(159,182,198,0.6);
}
#input.auto-resize {
  height: auto !important;
  overflow-y: hidden;
}
#sendBtn {
  background: linear-gradient(180deg, var(--accent1), var(--accent2));
  color: #042022;
  border: none;
  padding: 100% 100%;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 700;
  font-size: 14px;
  transition: all 0.2s ease;
  min-width: 70px;
  height: 44px; 
  display: flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  flex-shrink: 0;
}
#sendBtn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,210,255,0.3);
}
#sendBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
  box-shadow: none !important;
}
#sendBtn:active {
  transform: translateY(0);
}
.faq-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
  opacity: 1;
  transform: translateY(0);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.faq-buttons.hidden {
  display: none;
}
.welcome-actions.hidden {
  opacity: 0;
  transform: translateY(-20px);
  pointer-events: none;
  max-height: 0;
  overflow: hidden;
  margin: 0 !important;
  padding: 0 !important;
}
.sugg-buttons.hidden {
  opacity: 0;
  transform: translateY(-20px);
  pointer-events: none;
  max-height: 0;
  overflow: hidden;
  margin: 0 !important;
  padding: 0 !important;
}
.welcome-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-bottom: 40px;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}
.sugg-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
@media (max-width: 880px) {
  .chat {
    width: 94vw;
    height: 88vh;
  }
  .chat.faq-hidden {
    height: 90vh;
  } 
  .composer {
    padding: 10px 12px;
    gap: 8px;
  }  
  #input {
    font-size: 16px;
    padding: 8px 10px;
  } 
  #sendBtn {
    padding: 8px 12px;
    min-width: 60px;
    height: 40px;
  }
}
@media (max-width: 520px) {
  .chat {
    height: 85vh;
  } 
  .chat.faq-hidden {
    height: 88vh;
  }
  .composer {
    padding: 8px 10px;
    gap: 6px;
  }
  #input {
    min-height: 40px;
    padding: 8px 10px;
  }
  #sendBtn {
    padding: 8px 10px;
    min-width: 55px;
    height: 40px;
    font-size: 13px;
  }
}

@keyframes chatResize {
  0% {
    height: 760px;
    transform: scale(1);
  }
  50% {
    transform: scale(1.01);
  }
  100% {
    height: 820px;
    transform: scale(1);
  }
}

.chat.resizing {
  animation: chatResize 0.4s ease-out;
}


.faq-btn,
.welcome-btn,
.sugg-btn,
.orient-btn {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes resizePulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

.chat.pulse-resize {
  animation: resizePulse 0.3s ease-out;
}

:root {
  --mobile-gap: 10px;
  --tap-size: 44px;
}

@media (max-width: 880px) {
  .app { padding: 10px; }
  .chat {
    width: 100vw;
    max-width: 100vw;
    height: calc(100vh - 10px);
    border-radius: 12px;
    margin: 0;
  }

.header {
    padding: 10px;
    gap: 8px;
  }

.brand { gap: 10px; }
.title { font-size: 14px; }
.subtitle { font-size: 11px; }

.logo-area { width:48px; height:48px; overflow:hidden; border-radius:10px; }
.logo-area img { width:100%; height:100%; object-fit:cover; display:block; }

.messages { padding: 12px; max-height: calc(100vh - 220px); } /* leave space for header + composer */
.msg { font-size: 15px; max-width: 88%; }

.welcome-title { font-size: 22px; }
.welcome-subtitle { font-size: 14px; max-width: 92%; }

.welcome-btn, .faq-btn, .sugg-btn, .dropdown-item, .header-feedback-btn, .orient-btn {
    min-height: var(--tap-size);
    padding: 10px 14px;
    font-size: 15px;
  }

.composer { padding: 10px; gap: 8px; }
textarea#input, #input {
    min-height: 56px;
    font-size: 16px;
    padding: 12px;
    line-height: 1.45;
  }
button#sendBtn { min-width: 64px; height: 48px; padding: 12px 14px; font-size: 15px; border-radius: 12px; }


.logo-area:hover { animation: none; transform: none; }
.msg:hover { filter: none; }


.sugg-buttons .dropdown-content,
.dropdown-content {
    position: fixed !important;
    left: 8px !important;
    right: 8px !important;
    bottom: 8px !important;
    top: auto !important;
    max-height: 42vh !important;
    display: none;
    overflow: auto;
    border-radius: 12px !important;
    padding: 10px !important;
    z-index: 100000 !important;
    box-shadow: 0 18px 40px rgba(0,0,0,0.45) !important;
  }

.faq-buttons { gap: 10px; }
}

.logo-area { overflow:hidden; }
.logo-area img { width:100%; height:100%; object-fit:cover; display:block; }

textarea#input { transition: height 160ms ease; -webkit-text-size-adjust: 100%; }

@media (max-width: 520px) {
  body { font-size: 15px; }
}

.header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid rgba(255,255,255,0.04);backdrop-filter:blur(6px)}
.brand{display:flex;align-items:center;gap:14px}
.logo-area{
  width:56px;
  height:56px;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,var(--accent1),var(--accent2));
  box-shadow:0 10px 30px rgba(0,210,255,0.06);
  transition:transform .45s,box-shadow .24s;
  overflow:hidden;    
  position:relative;
}  
.logo-area:hover{animation:logoFloat 2.6s ease-in-out infinite}
@keyframes logoFloat{0%{transform:translateX(-6px) rotate(-2deg)}50%{transform:translateX(6px) rotate(2deg)}100%{transform:translateX(-6px) rotate(-2deg)}}
.logo-glow{ box-shadow:0 26px 68px rgba(0,210,255,0.45), inset 0 1px 0 rgba(255,255,255,0.06); transform:scale(1.06) rotate(2deg); }
.logo-area img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  border-radius:10px;
}
  .title{font-weight:700;font-size:15px;color:#e8fbff}
  .subtitle{font-size:12px;color:var(--muted)}

  .main{display:flex;flex-direction:column;flex:1;overflow:hidden}
  .messages{flex:1;padding:20px;overflow:auto;display:flex;flex-direction:column;gap:12px;scroll-behavior:smooth}
  .msg{max-width:78%;padding:12px 16px;border-radius:14px;line-height:1.45;font-size:15px;box-shadow:0 12px 40px rgba(2,6,23,0.45);opacity:0;transform:translateY(12px);animation:msgEnter .32s ease forwards}
  @keyframes msgEnter{to{opacity:1;transform:translateY(0)}}
  .msg.bot{align-self:flex-start;background:linear-gradient(180deg,var(--bubble), rgba(255,255,255,0.02));color:#dff8ff;border-top-left-radius:6px; border:1px solid rgba(0,0,0,0.12)}
  .msg.user{align-self:flex-end;background:linear-gradient(180deg,var(--user), #064e4e);color:#eafff4;border-top-right-radius:6px;border:1px solid rgba(0,0,0,0.12)}

  .msg:hover{filter:drop-shadow(0 6px 18px rgba(0,0,0,0.2))}

  .faq-buttons{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px;opacity:0;transform:translateY(6px);animation:faqIn .34s ease forwards;animation-delay:.04s}
  @keyframes faqIn{to{opacity:1;transform:translateY(0)}}
  .faq-btn{background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);color:#e6fbff;padding:8px 12px;border-radius:10px;font-size:13px;cursor:pointer;transition:transform .14s,box-shadow .14s}
  .faq-btn:hover{transform:translateY(-4px);box-shadow:0 10px 30px rgba(0,210,255,0.08)}
  .faq-btn.sending{animation:faqSend .6s ease}
  @keyframes faqSend{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}

  .sugg-buttons{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
  .sugg-btn{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(44, 33, 33, 0.01));border:1px solid rgba(255,255,255,0.03);color:#e6fbff;padding:8px 12px;border-radius:10px;font-size:13px;cursor:pointer;transition:transform .12s}
  .sugg-btn:hover{transform:translateY(-3px);background:linear-gradient(180deg,var(--accent1),var(--accent2));color:#042022}

.orient-btn {
  background: linear-gradient(180deg, rgba(255,255,255,0.025), rgba(255,255,255,0.015));
  border: 1px solid rgba(255,255,255,0.05);
  color: #e6fbff;
  padding: 8px 12px;
  border-radius: 10px;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.12s ease;
  display: inline-block;
  text-decoration: none;
}
.orient-btn:hover {
  transform: translateY(-3px);
  background: linear-gradient(180deg, var(--accent1), var(--accent2));
  color: #042022;
  box-shadow: 0 8px 25px rgba(0,210,255,0.15);
}
.orient-btn.hidden {
  opacity: 0 !important;
  transform: translateY(-10px) scale(0.95) !important;
  pointer-events: none !important;
  visibility: hidden !important;
}
.orient-btn:not(.hidden) {
  animation: buttonAppear 0.3s ease-out;
}
.faq-toggle-container {
  display: flex;
  align-items: center;
  gap: 3px;
  padding: 2px 3px;
  border-radius: 5px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.05);
  transition: all 0.2s ease;
}
.faq-toggle-container.active {
  background: rgba(47,226,122,0.08);
  border-color: rgba(47,226,122,0.2);
}
.faq-toggle-container.inactive {
  background: rgba(255,92,108,0.08);
  border-color: rgba(255,92,108,0.2);
}
.faq-toggle-label {
  color: var(--muted);
  font-size: 12px;
  font-weight: 500;
  transition: color 0.2s ease;
}
.faq-toggle-container.active .faq-toggle-label {
  color: #2fe27a;
}
.faq-toggle-container.inactive .faq-toggle-label {
  color: #ff5c6c;
}
.faq-toggle-switch {
  position: relative;
  display: inline-block;
  width: 42px;
  height: 22px;
}
.faq-toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}
.faq-toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255,92,108,0.2);
  border: 1px solid rgba(255,92,108,0.3);
  transition: 0.3s ease;
  border-radius: 22px;
}
.faq-toggle-slider:before {
  position: absolute;
  content: "";
  height: 16px;
  width: 16px;
  left: 2px;
  bottom: 2px;
  background: #ff5c6c;
  transition: 0.3s ease;
  border-radius: 50%;
  box-shadow: 0 2px 6px rgba(255,92,108,0.3);
}
input:checked + .faq-toggle-slider {
  background: rgba(47,226,122,0.2);
  border-color: rgba(47,226,122,0.4);
}
input:checked + .faq-toggle-slider:before {
  transform: translateX(20px);
  background: #2fe27a;
  box-shadow: 0 2px 6px rgba(47,226,122,0.4);
}
.faq-toggle-slider:hover {
  background: rgba(255,92,108,0.25);
  border-color: rgba(255,92,108,0.4);
}
input:checked + .faq-toggle-slider:hover {
  background: rgba(47,226,122,0.25);
  border-color: rgba(47,226,122,0.5);
}
.faq-buttons.hidden {
  display: none !important;
}
  .typing{display:inline-flex;gap:6px;align-items:center;padding:6px 8px;border-radius:10px;background:rgba(0,0,0,0.12);margin-top:6px}
  .dot{width:7px;height:7px;border-radius:50%;background:#dff7ff;opacity:.4;animation:dotBlink 1s infinite}
  .dot:nth-child(2){animation-delay:.12s}.dot:nth-child(3){animation-delay:.24s}
  @keyframes dotBlink{0%{opacity:.15;transform:translateY(0)}50%{opacity:1;transform:translateY(-4px)}100%{opacity:.15;transform:translateY(0)}}

  .composer {
  position: sticky;
  bottom: 0;
  padding: 12px 16px;
  background: linear-gradient(180deg, rgba(3,6,10,0.9), rgba(4,8,16,0.98));
  border-top: 1px solid rgba(255,255,255,0.03);
  display: flex;
  gap: 10px;
  align-items: flex-end;
  max-width: 100%;
  box-sizing: border-box;
}
textarea#input {
  flex: 1;
  min-height: 48px;
  max-height: 120px;
  height: auto;
  resize: none;
  background: rgba(255,255,255,0.02);
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.08);
  color: #e6fbff;
  font-size: 14px;
  font-family: inherit;
  outline: none;
  transition: all 0.2s ease;
  line-height: 1.4;
  overflow-y: auto;
  box-sizing: border-box;
}
textarea#input:focus {
  border-color: var(--accent1);
  box-shadow: 0 0 0 3px rgba(0,210,255,0.1);
  background: rgba(255,255,255,0.04);
}
textarea#input::placeholder {
  color: rgba(159,182,198,0.6);
}
textarea#input.expanded {
  min-height: 60px;
}
button#sendBtn {
  background: linear-gradient(180deg, var(--accent1), var(--accent2));
  color: #042022;
  border: none;
  padding: 12px 16px;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 700;
  font-size: 14px;
  transition: all 0.2s ease;
  min-width: 80px;
  height: fit-content;
  align-self: flex-end;
  display: flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
}
button#sendBtn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,210,255,0.3);
}
button#sendBtn:active {
  transform: translateY(0);
}
button#sendBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
  box-shadow: none !important;
  background: rgba(255,255,255,0.1) !important;
  color: rgba(255,255,255,0.3) !important;
}
button#sendBtn.sending {
  background: linear-gradient(180deg, #666, #888) !important;
  color: #ccc !important;
}
@media (max-width: 880px) {
  .composer {
    padding: 10px 12px;
    gap: 8px;
  }
  textarea#input {
    font-size: 16px;
    padding: 10px 12px;
  }
  button#sendBtn {
    padding: 10px 14px;
    min-width: 70px;
  }
}
@media (max-width: 520px) {
  .composer {
    padding: 8px 10px;
    gap: 6px;
  }
  textarea#input {
    min-height: 44px;
    padding: 8px 10px;
  }
  button#sendBtn {
    padding: 8px 12px;
    min-width: 60px;
    font-size: 13px;
  }
}
.composer:focus-within {
  box-shadow: 0 -2px 20px rgba(0,210,255,0.1);
}
textarea#input {
  transition: height 0.2s ease;
}
  .welcome-screen {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
    padding: 40px 20px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  }
  .welcome-logo {
    width: 75px;
    height: 75px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--accent1), var(--accent2));
    box-shadow: 0 14px 40px rgba(0,210,255,0.06);
    margin-bottom: 24px;
    animation: breathe 2.6s ease-in-out infinite;
  }

  @keyframes breathe {0%{transform:translateY(0) scale(1); box-shadow:0 14px 40px rgba(0,210,255,0.04)}50%{transform:translateY(-6px) scale(1.03); box-shadow:0 30px 80px rgba(0,210,255,0.14)}100%{transform:translateY(0) scale(1); box-shadow:0 14px 40px rgba(0,210,255,0.04)}}

  .welcome-title {
    font-size: 32px;
    font-weight: 700;
    margin-bottom: 8px;
    background: linear-gradient(135deg, var(--accent1), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .welcome-subtitle {
    font-size: 16px;
    color: var(--muted);
    margin-bottom: 40px;
    max-width: 500px;
  }

  .welcome-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
    margin-bottom: 60px;
  }

  .welcome-btn {
    background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
    border: 1px solid rgba(255,255,255,0.03);
    color: #e6fbff;
    padding: 12px 20px;
    border-radius: 12px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
  }

  .welcome-btn:hover {
    transform: translateY(-2px);
    background: linear-gradient(180deg, var(--accent1), var(--accent2));
    color: #042022;
    box-shadow: 0 10px 30px rgba(0,210,255,0.2);
  }

  .welcome-input {
    width: 100%;
    max-width: 600px;
    min-height: 60px;
    background: rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 16px;
    color: #e6fbff;
    font-size: 16px;
    outline: none;
    transition: border-color 0.3s ease;
    resize: none;
  }

  .welcome-input:focus {
    border-color: var(--accent1);
    box-shadow: 0 0 0 4px rgba(0,210,255,0.06);
  }

  .messages::-webkit-scrollbar{width:10px}
  .messages::-webkit-scrollbar-track{background:transparent}
  .messages::-webkit-scrollbar-thumb{background:linear-gradient(180deg,var(--accent2),var(--accent1));border-radius:999px;box-shadow:inset 0 0 0 2px rgba(0,0,0,0.15)}
  .messages{scrollbar-width:thin;scrollbar-color:linear-gradient(180deg,var(--accent2),var(--accent1)) transparent}

  .msg a{color:var(--accent1);text-decoration:underline}

  @media (max-width:880px){ .chat{width:94vw;height:88vh} .logo-area{width:48px;height:48px} }
  @media (max-width:520px){ .composer{padding:10px} textarea{min-height:48px} .messages{padding:12px} .msg{max-width:90%} .welcome-logo{width:64px;height:64px} .welcome-title{font-size:24px} }
</style>
</head>
<body>
<div class="app">
  <div class="chat" role="application" aria-label="AILA chat">
    <div class="header">
      <div class="brand">
        <div id="logo" class="logo-area" title="AILA logo">
<!-- Header logo -->           
        <div style="width:100px;height:100%;border-radius:20px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center">
          <img src="https://i.postimg.cc/3rG4DBFN/ailalogo.png" alt="AILA Logo"> <!--CHANGE THE URL HERE POGII-->
        </div>
            <defs>
              <linearGradient id="g1" x1="0" x2="1" y1="0" y2="1">
                <stop offset="0" stop-color="#00d1ff"/>
                <stop offset="1" stop-color="#1dd3c9"/>
              </linearGradient>
            </defs>
            <rect x="4" y="4" width="56" height="56" rx="10" fill="none" stroke="url(#g1)" stroke-width="2" opacity="0.12"/>
            <g stroke="url(#g1)" stroke-width="1.6" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 32h8" stroke-dasharray="20" stroke-dashoffset="20">
                <animate attributeName="stroke-dashoffset" from="20" to="0" dur="1.6s" repeatCount="indefinite"/>
              </path>
              <path d="M44 32h-8" stroke-dasharray="20" stroke-dashoffset="20">
                <animate attributeName="stroke-dashoffset" from="20" to="0" dur="1.6s" repeatCount="indefinite" begin="0.15s"/>
              </path>
              <circle cx="32" cy="20" r="2.6" fill="url(#g1)">
                <animate attributeName="r" values="2.6;3.8;2.6" dur="1.6s" repeatCount="indefinite"/>
              </circle>
              <circle cx="32" cy="44" r="2.6" fill="url(#g1)">
                <animate attributeName="r" values="2.6;3.8;2.6" dur="1.6s" repeatCount="indefinite" begin="0.35s"/>
              </circle>
            </g>
          </svg>
        </div>

<!--HEADER AREA-->
        <div>
          <div class="title">AILA</div>
          <div class="subtitle">Artificial Intelligent Learning Assistant</div>
          <span class="subtitle">Ver-0.8.6</span>
        </div>
      </div>

      <div style="display:flex;align-items:center;gap:12px">
        <div class="faq-toggle-container">
      <span class="faq-toggle-label"></span>
      <label class="faq-toggle-switch">
        <input type="checkbox" id="faqToggle" checked>
        <span class="faq-toggle-slider"></span>
      </label>
    </div>
    
<!--feedback button-->
    <button id="feedbackBtn" class="header-feedback-btn">üìù</button>
  </div>
</div>

<!-- text box -->
    <div class="main">
      <div class="messages" id="messages" aria-live="polite" role="log">
      </div>
      <div class="composer">
        <textarea id="input" placeholder="Type a message..." aria-label="Message input"></textarea>
        <button id="sendBtn" class="send">Send</button>
      </div>
    </div>

  </div>
</div>

<script>
// N8N chat webhook link constant
const CHAT_WEBHOOK = 'https://laict.app.n8n.cloud/webhook/aila-chat';

document.addEventListener('click', (e) => {
  if (!e.target.closest('.dropdown')) {
    const allDropdowns = document.querySelectorAll('.dropdown');
    allDropdowns.forEach(dropdown => {
      const content = dropdown.querySelector('.dropdown-content');
      if (content) content.style.display = 'none';
    });
  }
});

document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    const allDropdowns = document.querySelectorAll('.dropdown');
    allDropdowns.forEach(dropdown => {
      const content = dropdown.querySelector('.dropdown-content');
      if (content) content.style.display = 'none';
    });
  }
});
const faqToggle = document.getElementById('faqToggle');
const faqToggleContainer = document.querySelector('.faq-toggle-container');

let faqVisible = localStorage.getItem('faqVisible');
if (faqToggle && faqToggleContainer) {
  if (faqVisible === null) {
    faqVisible = 'true';
    localStorage.setItem('faqVisible', faqVisible);
  }
  
  faqToggle.checked = faqVisible === 'true';
  updateToggleState();
  
  faqToggle.addEventListener('change', function() {
    faqVisible = this.checked ? 'true' : 'false';
    localStorage.setItem('faqVisible', faqVisible);
    updateToggleState();
    showToggleNotification();
  });
}

function updateToggleState() {
  if (faqToggle && faqToggle.checked) {
    faqToggleContainer.classList.add('active');
    faqToggleContainer.classList.remove('inactive');
    showAllQuickButtons();
  } else {
    faqToggleContainer.classList.add('inactive');
    faqToggleContainer.classList.remove('active');
    hideAllQuickButtons();
  }
}

function showAllQuickButtons() {
  const faqButtons = document.querySelectorAll('.faq-buttons');
  faqButtons.forEach(btn => {
    btn.classList.remove('hidden');
  });
  
  const welcomeButtons = document.querySelectorAll('.welcome-actions');
  welcomeButtons.forEach(btn => {
    btn.classList.remove('hidden');
  });
  
  const suggButtons = document.querySelectorAll('.sugg-buttons');
  suggButtons.forEach(btn => {
    btn.classList.remove('hidden');
  });
  
  const faqToggleBtns = document.querySelectorAll('.sugg-btn');
  faqToggleBtns.forEach(btn => {
    btn.classList.remove('hidden');
  });
  
  const orientButtons = document.querySelectorAll('.orient-btn');
  orientButtons.forEach(btn => {
    btn.classList.remove('hidden');
    btn.style.opacity = '1';
    btn.style.transform = 'translateY(0) scale(1)';
    btn.style.pointerEvents = 'auto';
  });
  
  const quickAskButtons = document.querySelectorAll('.faq-btn, .welcome-btn, .sugg-btn, .orient-btn');
  quickAskButtons.forEach(btn => {
    btn.classList.remove('hidden');
    btn.style.opacity = '1';
    btn.style.transform = 'translateY(0) scale(1)';
    btn.style.pointerEvents = 'auto';
  });
}

function hideAllQuickButtons() {
  const faqButtons = document.querySelectorAll('.faq-buttons');
  faqButtons.forEach(btn => {
    btn.classList.add('hidden');
  });
  
  const welcomeButtons = document.querySelectorAll('.welcome-actions');
  welcomeButtons.forEach(btn => {
    btn.classList.add('hidden');
  });
  
  const suggButtons = document.querySelectorAll('.sugg-buttons');
  suggButtons.forEach(btn => {
    btn.classList.add('hidden');
  });
  
  const faqToggleBtns = document.querySelectorAll('.sugg-btn');
  faqToggleBtns.forEach(btn => {
    btn.classList.add('hidden');
  });
  
  const orientButtons = document.querySelectorAll('.orient-btn');
  orientButtons.forEach(btn => {
    btn.classList.add('hidden');
    btn.style.opacity = '0';
    btn.style.transform = 'translateY(-10px) scale(0.95)';
    btn.style.pointerEvents = 'none';
  });
  
  const quickAskButtons = document.querySelectorAll('.faq-btn, .welcome-btn, .sugg-btn, .orient-btn');
  quickAskButtons.forEach(btn => {
    btn.classList.add('hidden');
    btn.style.opacity = '0';
    btn.style.transform = 'translateY(-10px) scale(0.95)';
    btn.style.pointerEvents = 'none';
  });
}

function applyToggleToCurrentView() {
  if (faqToggle && faqToggle.checked) {
    showAllQuickButtons();
  } else {
    hideAllQuickButtons();
  }
}

const originalShowWelcomeScreen = showWelcomeScreen;
showWelcomeScreen = function() {
  originalShowWelcomeScreen();
  applyToggleToCurrentView();
};

const originalAppendMessage = appendMessage;
appendMessage = function(text, who='bot', attachFAQs=false, suggestions=[]) {
  const result = originalAppendMessage(text, who, attachFAQs, suggestions);
  setTimeout(() => {
    applyToggleToCurrentView();
  }, 50);
  
  return result;
};

// feedback button area functionality
const feedbackBtn = document.getElementById('feedbackBtn');

// click event to feedback button
if (feedbackBtn) {
  feedbackBtn.addEventListener('click', (e) => {
    e.preventDefault();
    
    // Show brief loading animation
    const originalText = feedbackBtn.innerHTML;
    feedbackBtn.innerHTML = '‚è≥...';
    feedbackBtn.disabled = true;
    
    setTimeout(() => {
      // feedback form link here
      window.open('https://forms.gle/cNRtaUZBwDuPoUk77','_blank');
      en
      setTimeout(() => {
        feedbackBtn.innerHTML = originalText;
        feedbackBtn.disabled = false;
      }, 2000);
      
    }, 300);
  });
}
/*  show up button (pwede mo itong dagdagan or kukuhaan or e change)*/
const faqs = [
  "Who is AILA?",
  "Who made AILA?",
  "What's in ICT?",
  "What is MRP?",
  "What is MPS?",
  "What is BOM?",
  "What is Inventory?",
  "What is PO?",
  "How to do dashboard?",
  "Data connection between sheets",
  "How can I prepare for oral validation",
  "Three types of data ",
  "References",
  "Main developer of AILA?",
];
/* response area */
/* dito mo e ccustomize if may babagohin or e dadagdag na template questions */
const offlineResponses = {
  // random templated questions //
  "Hi": "Hellow kuys! I'm AILA, your AI learning assistant. How can I help you today?",
  "Orientation to data processing": `Hi kuys!üëã
  \n**Orientation to Data Processing**
  \n\n- Ngayon, magbibigay muna ako ng overview tungkol sa process flow ng ating data processing activity. Mayroon na ba sa inyo ang may karanasan sa manufacturing? Pamilyar ba kayo sa role ng isang material planner?
  \n- Ang material planner ay may mahalagang papel: tiyakin na lahat ng raw materials at components ay available sa tamang oras, tamang bilang, at tamang specification upang maiwasan ang delay sa production. Ang kanilang trabaho ay nakabatay sa Bills of Materials (BOM), kasama ang pag-check ng inventory at pag-request ng supply batay sa pangangailangan ng production.
  \n- Sa activity natin, gagayahin natin ang prinsipyong ito. Upang mabuo ang mini conveyor system, gagawa tayo ng structured Material Requirement Planning (MRP). Dito natin ililista at iko-compute ang lahat ng raw materials at components na kailangan. Pagkatapos, makikita natin kung sapat ang inventory o kung kailangan pa ng additional supply para maging tuloy-tuloy ang production flow.
`,    
  "Hello": "Hi kuysüëã! I'm AILA, your AI learning assistant. How can I help you today?",
  "xlookup":`Hi kuys!üëã **What is XLOOKUP Formula?**
  \n\n- Sa example na ito, gagamit tayo ng XLOOKUP para awtomatikong hanapin ang data sa ibang sheet, na ang pangalan ay **BOM**.
  \n- Formula:
    =XLOOKUP(A2, BOM!$B$2:$B, BOM!$F$2:$F)
  \n- Paano ito gumagana?
      ‚Ä¢ Ang A2 ay ang hinahanap mong value (hal. item name o code).
      ‚Ä¢ Sa BOM sheet, hahanapin niya ang value na nasa B2 sa column A.
      ‚Ä¢ Kapag nahanap iyon, kukunin niya ang katumbas na data sa column F (hal. quantity o price).
  \n- Para itong ‚Äúsearch engine‚Äù sa Excel: magta-type ka lang ng item, tapos automatic ilalabas ni XLOOKUP ang tamang sagot mula sa ibang sheet ‚Äî hindi mo na kailangang mag-scroll o mag-manual hanap.
`,
// templated questions based on buttons //
// templated  response FAQS //
  "Who made AILA": `Hi kuys!üëã, here's a little history! üë•
\n
AILA, **Artificial Intelligent Learning Assistant**, developed in the Kaizenset ICT Data Processing Department.
\n
**Kaiser** envisions **AILA**, and together with others, began pioneering its creation, thankfuly **Josh** came and with his skills he took the lead as AILA‚Äôs head developer turning AILA to a powerful tool that solves long term challenges designed to improve efficiency and learning outcomes, making it a reliable support system for both trainees and facilitators.
`,
  "Who is AILA": `Hi kuys!üëã AILA, which stands for **Artificial Intelligent Learning Assistant**, is an AI chatbot designed to assist ICT trainees and learning assistants.
\n
It provides guidance by answering questions related to Material Requirement Planning (MRP), spreadsheet concepts, ICT modules, and internal school documents. AILA is capable of understanding natural language, recalling previous conversations, and delivering instant responses, similar to interacting with a tutor.  
\n
It operates under a hybrid framework, offering both offline templated responses and online AI-driven interactivity through automation, ensuring functionality even in limited connectivity environments.
\n
**Purpose:**
- Enhance independent learning
- Improve operational efficiency
- Reduce repetitive inquiries
- Allow facilitators and learning assistants to focus on mentoring and project development
\n
AILA is designed to make learning easier, faster, and more efficient for everyone involved. üí°
`,
  "ICT":`Hi kuys!üëã The **ICT (Information and Communication Technology) program** in the Kaizenset ICT Data Processing Department includes various modules and topics aimed at enhancing technical skills and knowledge.  
- **Material Requirement Planning (MRP):** Topics like "What is MRP?" and "Explain the MPS module" are included.
- **Spreadsheet Concepts:** Queries like "How do I use XLOOKUP?" and "What's the Data connection between sheets" are supported.
- **ICT Modules:** Topics such as "How to do dashboard" and "What are the three types of data in MRP" are covered.
\n
**Program Emphasis:**
The ICT program emphasizes vocational training, focusing on hands-on learning, procedural accuracy, safety, and tool use.  
AILA supports this by providing structured, task-based templates and guided flows to deliver procedural clarity in both offline and online modes.  
This approach fosters independent problem-solving and knowledge transfer.
`,
  "MRP": `Hi kuys!üëã Material Requirements Planning (MRP) is a systematic approach used in manufacturing to manage inventory and optimize production timelines. It calculates and determines the materials and components needed to manufacture a product, ensuring that they are available at the right time and in the right quantities.

Kuys, MRP helps determine:
- What materials are needed
- How much to order
- When to order them

Inside MRP Sheet, there are several key components:
1. MPS (Master Production Schedule)
2. BOM (Bill of Materials)
3. Inventory
4. PO (Purchase Orders)
5. Dashboard
\n
**[MATERIAL_REQUIREMENTS_PLANNING_20251023](https://docs.google.com/spreadsheets/d/1y-9QnNwmhOlyjKYf9uaHA5Q4IAy2ANOs/edit?gid=506882268#gid=506882268)**
you can also refer to the given template found in modules for a more detailed understanding of MRP components and their functions.`,
  "MPS": `Hi kuys!üëã **MPS (Master Production Schedule)** is a detailed plan in the MRP system that specifies:
\n
  - what products need to be produced,  
  - when they should be produced,  
  - and in what quantities. 
\n
It serves as the starting point for MRP, defines the production schedule, drives material requirement calculations, and ensures production aligns with customer demand and delivery timelines. It also feeds data into other MRP components like the BOM and inventory sheets to calculate material needs and manage stock levels effectively.  
\n
TABLE BASED ON **[MATERIAL_REQUIREMENTS_PLANNING_20251023](https://docs.google.com/spreadsheets/d/1y-9QnNwmhOlyjKYf9uaHA5Q4IAy2ANOs/edit?gid=506882268#gid=506882268)**
<table border="1">
  <thead>
    <tr>
      <th>Batch Code</th>
      <th>Product Description</th>
      <th>Planned Qty</th>
      <th>Actual Qty</th>
      <th>Schedule Week</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PROD BATCH 1</td>
      <td>Mechatronics Trainer Board</td>
      <td>3</td>
      <td>3</td>
      <td>Week 1</td>
      <td>On Time</td>
    </tr>
    <tr>
      <td>PROD BATCH 2</td>
      <td>Mechatronics Trainer Board</td>
      <td>3</td>
      <td>3</td>
      <td>Week 2</td>
      <td>On-Time</td>
    </tr>
    <tr>
      <td>PROD BATCH 3</td>
      <td>Mechatronics Trainer Board</td>
      <td>3</td>
      <td>1</td>
      <td>Week 3</td>
      <td>Delayed</td>
    </tr>
    <tr>
      <td>PROD BATCH 4</td>
      <td>Mechatronics Trainer Board</td>
      <td>3</td>
      <td>5</td>
      <td>Week 4</td>
      <td>Compensated</td>
    </tr>
  </tbody>
</table>
\n
1Ô∏è‚É£ **Status Formula:** 
=IF(C2=D2, "On Time", IF(D2<C2, "Delayed", "Compensated"))
\n
**Note:**
- Ito ay para sa **mga produkto mismo**, hindi para sa parts or components.
- **Planned Qty** - ang target na dami na kailangang gawin sa isang batch.
- **Actual Qty** - ang totoong dami na nagawa sa batch na iyon.
- **Schedule Week** - ang linggo kung kailan naka-schedule ang production ng batch
- **Status** - nagpapakita kung ang batch ay "On Time", "Delayed", o "Compensated" base sa pagkakaiba ng Planned at Actual Qty.
`,
  "BOM": `Hi kuys!üëã **What is BOM?**\n BOM (Bill of Materials) is a product‚Äôs recipe, it lists all the materials and quantities needed to build the product.\n
\nTABLE BASED ON **[MATERIAL_REQUIREMENTS_PLANNING_20251023](https://docs.google.com/spreadsheets/d/1y-9QnNwmhOlyjKYf9uaHA5Q4IAy2ANOs/edit?gid=2038808217#gid=2038808217)**  
<table border="1">
 <thead>
    <tr>
      <th>Product</th>
      <th>Item Code</th>
      <th>Item Description</th>
      <th>Specification</th>
      <th>Unit Price (‚Ç±)</th>
      <th>Qty</th>
      <th>UOM</th>
      <th>Safety Stock</th>
      <th>Lead Time (days)</th>
      <th>Approved Supplier</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Mechatronics Training Board</td>
      <td>TB-01</td>
      <td>Terminal Blocks</td>
      <td>12 pairs, 15A</td>
      <td>‚Ç±140</td>
      <td>4</td>
      <td>pcs</td>
      <td>15</td>
      <td>3</td>
      <td>RS Philippines</td>
    </tr>
    <tr>
      <td>Mechatronics Training Board</td>
      <td>LS-02</td>
      <td>Limit Switch</td>
      <td>SPDT, 10A</td>
      <td>‚Ç±250</td>
      <td>2</td>
      <td>pcs</td>
      <td>10</td>
      <td>5</td>
      <td>Mouser Electronics</td>
    </tr>
    <tr>
      <td>Mechatronics Training Board</td>
      <td>SV-03</td>
      <td>Solenoid Valve</td>
      <td>12V DC, 1/4"</td>
      <td>‚Ç±2,500</td>
      <td>1</td>
      <td>pcs</td>
      <td>5</td>
      <td>7</td>
      <td>Automation Direct</td>
    </tr>
    <tr>
      <td>more</td>
      <td>more</td>
      <td>more</td>
      <td>more</td>
      <td>more</td>
      <td>more</td>
      <td>more</td>
      <td>more</td>
      <td>more</td>
      <td>more</td>
    </tr>
  </tbody>
</table>
\n**üü©Important Note:**
- **Safety Stock** - indicates the minimum quantity to keep on hand to avoid stockouts.
- **Lead Time** - is the number of days it takes to receive the item after placing an order.
- **Item code** - unique item code specific to a material
- **Description** - name of the material
- **Unit Price** - is the cost per unit of each item.
- **Qty indicates** - how many units are needed for one Mechatronics Training Board.
- **UOM (Unit of Measure)** - specifies the measurement unit for the quantity (e.g., pieces, set).
- **Approved Supplier** - lists the preferred supplier for each item.
\n**Item code** must be consistent across all sheets for accurate data connection using =XLOOKUP formula.
`,
  "Inventory": `Hi kuys!üëã **What is Inventory**?
\n**Inventory** monitors stock levels:  
- Opening balance  
- Purchases received  
- Issued to production  
- Ending balance 
- Reoder status
\n
Inventory refers to the record of all materials or products currently available in stock. It tracks important details such as opening balances, purchases, issues, and ending balances to ensure there are enough materials for production.
\n
TABLE BASED ON **[MATERIAL_REQUIREMENTS_PLANNING_20251023](https://docs.google.com/spreadsheets/d/1y-9QnNwmhOlyjKYf9uaHA5Q4IAy2ANOs/edit?gid=89080024#gid=89080024)**
\n\n
<table border="1">
  <thead>
    <tr>
      <th>Item Code</th>
      <th>Description</th>
      <th>Opening Stock</th>
      <th>Purchases Received</th>
      <th>Issued to Production</th>
      <th>Ending Balance</th>
      <th>Safety Stock Level</th>
      <th>Reorder Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>TB-01</td>
      <td>Terminal Blocks</td>
      <td>60</td>
      <td>0</td>
      <td>20</td>
      <td>40</td>
      <td>50</td>
      <td>Reorder</td>
    </tr>
    <tr>
      <td>LS-02</td>
      <td>Limit Switch</td>
      <td>30</td>
      <td>10</td>
      <td>5</td>
      <td>35</td>
      <td>20</td>
      <td>Available</td>
    </tr>
    <tr>
      <td>SV-03</td>
      <td>Solenoid Valve</td>
      <td>15</td>
      <td>5</td>
      <td>10</td>
      <td>10</td>
      <td>8</td>
      <td>Available</td>
  </tbody>
</table>
\n\n
Kuys! here are the formulas that we will use:
\n
1Ô∏è‚É£ **Ending Balance Formula:**  
Opening Stock + Purchases Received ‚Äì Issued to Production
=C2 + D2 - E2
\n
2Ô∏è‚É£ **Safety Stock Lookup (from BOM sheet):**  
=XLOOKUP(A2, BOM!$B$2:$B, BOM!$H$2:$H)
\n
‚Ä¢ Finds the Safety Stock Level of each item using **Item Code**  
‚Ä¢ Returns Safety Stock value from **BOM sheet column H**
\n
3Ô∏è‚É£ **Reorder Status Formula**  
=IF(F2<G2, "Reorder", "Available")
\n
4Ô∏è‚É£ **Issued to Production Formula** (*Optional*)
=MPS!$D4 * XLOOKUP(A2, BOM! $B$2:$B,BOM!$F$2:$F)
\n
5Ô∏è‚É£ **Unit Cost Formula**
=XLOOKUP(B2, BOM!$B$2:$B, BOM!$E$2:$E)
\n
üü©Important Note:
- **Opening Stock** - the quantity of items available at the ending balance of the previous week in inventory records.
- **Purchases Received** - the quantity of items added to inventory from purchase orders from previous week.
- **Issued to Production** - the quantity of items used in production based on the current week actual quantity in **MPS** and **multiplied by** the targetted material found in **BOM**.
- **Ending Balance** - the remaining quantity after accounting for purchases and production usage.
- **Safety Stock Level** - the minimum quantity to keep on hand to avoid stockouts, looked up from BOM sheet.
- **Reorder Status** - indicates if more items need to be ordered based on whether the ending balance is below the safety stock level.
\n
All materials with **reorder** will be processed in the PO (Purchase Order) sheet.
`,
  "PO": `Hi kuys!üëã **PO (Purchase Order)** is used when an item needs to be re-ordered to replenish component stocks.  
It acts as a **formal request sent to the supplier** to restock needed materials.
Role in MRP:  
‚Ä¢ Manages the procurement process  
‚Ä¢ Tracks delivery status and updates inventory records once materials are received  
\n
It ensures timely replenishment of stock to avoid production delays and maintains accurate records of procurement costs and supplier performanc
\n
TABLE BASED ON **[MATERIAL_REQUIREMENTS_PLANNING_20251023](https://docs.google.com/spreadsheets/d/1y-9QnNwmhOlyjKYf9uaHA5Q4IAy2ANOs/edit?gid=601851345#gid=601851345)**
\n
<table border="1">
  <thead>
    <tr>
      <th>PO Number</th>
      <th>Item Code</th>
      <th>Description</th>
      <th>Qty Ordered</th>
      <th>Unit Price</th>
      <th>Total Cost</th>
      <th>Order Date</th>
      <th>Lead Time (days)</th>
      <th>Expected Delivery Date</th>
      <th>Supplier</th>
      <th>Actual Delivery Date</th>
      <th>Delivery Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PO-1001</td>
      <td>TB-01</td>
      <td>Terminal Blocks</td>
      <td>20</td>
      <td>‚Ç±140</td>
      <td>‚Ç±2,800</td>
      <td>2024-10-01</td>
      <td>3</td>
      <td>2024-10-04</td>
      <td>RS Philippines</td>
      <td>2024-10-03</td>
      <td>Delivered</td>
    </tr>
    <tr>
      <td>PO-1002</td>
      <td>LS-02</td>
      <td>Limit Switch</td>
      <td>10</td>
      <td>‚Ç±250</td>
      <td>‚Ç±2,500</td>
      <td>2024-10-02</td>
      <td>5</td>
      <td>2024-10-07</td>
      <td>Mouser Electronics</td>
      <td></td>
      <td>Pending</td>
    </tr>
    <tr>
      <td>PO-1003</td>
      <td>SV-03</td>
      <td>Solenoid Valve</td>
      <td>5</td>
      <td>‚Ç±2,500</td>
      <td>‚Ç±12,500</td>
      <td>2024-10-01</td>
      <td>7</td>
      <td>2024-10-08</td>
      <td>Automation Direct</td>
      <td>2024-10-10</td>
      <td>Delayed</td>
    </tr>
  </tbody>
</table>
\n\n
Kuys! here are the formulas that we will use:
\n
1Ô∏è‚É£ **Unit Price Formula:**
=XLOOKUP(B2, BOM!$B$2:$B, BOM!$E$2:$E)
\n
‚Ä¢ Finds the Unit Price of each item using **Item Code**
‚Ä¢ Returns Unit Price value from **BOM sheet column E**
\n
2Ô∏è **Total Cost Formula:**  
=D2 * E2
\n
3Ô∏è‚É£ **Lead Time (days):**
=XLOOKUP(B2, BOM!$B$2:$B, BOM!$I$2:$I)
\n
‚Ä¢ Finds the Lead Time of each item using **Item Code**
‚Ä¢ Returns Lead Time value from **BOM sheet column I**
\n
4Ô∏è‚É£ **Expected Delivery Date:**  
=G2 + H2
\n
5Ô∏è‚É£ **Delivery Status Formula:**  
=IF(J2="","Pending",IF(J2<=I2,"Delivered","Delayed"))
\n
6Ô∏è‚É£ **QTY ordered formula** (*optional*)
=MPS!$C4*XLOOKUP(B2,BOM!$B$2:$B,BOM!$F$2:$F)
\n
**üü©Important Note:**
\n
1. **Qty Ordered** - the quantity of items being requested from the supplier based on <U style="color:skyblue;">**INVENTORY**</u> (**ending bal** - **safety stock**) + **planned qty** found in next week you are working on in <u style="color:skyblue;">**MPS**</u> **Multiplied By** targetted **material qty** found in <u style="color:skyblue;">**BOM**.</u>
2. **Unit Price** - the cost per unit of each item, looked up from BOM sheet.
3. **Total Cost** - the total expense for the order line, calculated by multiplying Qty Ordered.
4. **Order Date** - the date when the purchase order is created.
5. **Lead Time (days)** - the number of days it takes to receive the item after placing an order, looked up from BOM sheet.
6. **Expected Delivery Date** - the date when the items are expected to arrive, calculated by adding Lead Time to Order Date.
7. **Actual Delivery Date** - the date when the items are actually received.
8. **Delivery Status** - indicates whether the order is **"Pending"**, **"Delivered"**, or **"Delayed"** based on Actual Delivery Date vs Expected Delivery Date.
`,
  "dashboard":`Hi kuys!üëã **Data Visualization(Dashboard)** makes data easier to see and understand.
It uses charts and graphs so information becomes clearer and faster to analyze.

*Ang Data Visualization ay ginagamit para mas madali makita at maintindihan ang data.
Gumagamit ito ng charts at graphs para mas malinaw ipakita ang impormasyon at mas madali itong maipresenta sa oral validation.*
\n\n
**Purpose of Data Visualization:**
‚Ä¢ Converts raw data into visual insights
‚Ä¢ Helps identify patterns and trends
‚Ä¢ Makes reports easier to explain and understand
\n
DASHBOARD BASED ON **[MATERIAL_REQUIREMENTS_PLANNING_20251023](https://docs.google.com/spreadsheets/d/1y-9QnNwmhOlyjKYf9uaHA5Q4IAy2ANOs/edit?gid=677970753#gid=677970753)**
\n
**Steps to Create a Dashboard:**
1. **Pivot MPS Summary**
    - Select all data in mps sheet
    - Insert ‚Üí Pivot Table ‚Üí New Sheet ‚Üí Create
    - In Rows, add Product Description
    - In Values, add Planned Qty and Actual Qty (set to SUM)
    **Creating a chart from Pivot Table:**
      - Select the pivot table data
      - Insert ‚Üí Chart ‚Üí Choose chart type (Column Chart)
      - Set the required titles and labels in customization based on the template
2. **Pivot Inventory Status**
    - Select all data in inventory sheet
    - Insert ‚Üí Pivot Table ‚Üí New Sheet ‚Üí Create
    - In Rows, add description
    - In Values, add ending balance and safety stock (set to SUM)
    **Creating a chart from Pivot Table:**
      - Select the pivot table data
      - Insert ‚Üí Chart ‚Üí Choose chart type (Column Chart)
      - Set the required titles and labels in customization based on the template
      \n
3. **Pivot Supplier Performance**
    - Select all data in po sheet
    - Insert ‚Üí Pivot Table ‚Üí New Sheet ‚Üí Create
    - In Rows, add Supplier
    - In Values, add lead time (set to AVERAGE)
    - In Values, add Total Cost (set to SUM)
    - In filter, only select the specific supplier depending on supplier's delivery status found in PO sheet
\n
*(Copy the pivot table 2 more times in the same sheet and change the filter to the other suppliers depending on their delivery status):*
- First pivot table name it (delivered)
- Second pivot table name it (pending)
- Third pivot table name it (delayed)
\n
*after doing all that make this table inside the sheet ***below*** the pivot tables:*
**DELIVERY STATUS PERFORMANCE**
<table border="1">
  <thead>
    <tr>
      <th>supplier</th>
      <th> Avg LT (Delivered)</th>
      <th> Cost (Delivered)</th>
      <th> Avg LT (Delayed)</th>
      <th> Cost (Delayed)</th>
      <th> Avg LT (Pending)</th>
      <th> Cost (Pending)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>RS Philippines</td>
      <td>3</td>
      <td>‚Ç±2,800</td>
      <td>  </td>
      <td>  </td>
      <td>  </td>
      <td>  </td>
    </tr>
    <tr>
      <td>Automation Direct</td>
      <td>  </td>
      <td>  </td>
      <td>7</td>
      <td>‚Ç±12,500</td>
      <td>  </td>
      <td>  </td>
    </tr>
    <tr>
      <td>Mouser Electronics</td>
      <td>  </td>
      <td>  </td>
      <td>  </td>
      <td>  </td>
      <td>5</td>
      <td>‚Ç±2,500</td>
    </tr>
  </tbody>
</table>
\n
\n*after making this table yo can now proceed to create the chart:*
  - Select the table data
  - Insert ‚Üí Chart ‚Üí Choose chart type (combo chart)
  - scroll down to the setup
    - Click use row as headers
    - Click Use column as labels
\n
**customization settings:**
- go to customize tab
- go to series
  - For Cost (Delivered), set to line chart, put to the right axis.
  - For Cost (Delayed), set to line chart, put to the right axis.
  - For Cost (Pending), set to line chart, put to the right axis.
  - For Avg LT (Delivered), set to column chart
  - For Avg LT (Delayed), set to column chart
  - For Avg LT (Pending), set to column chart
- go to legend
  - click positions
  - select bottom
- Set the required titles and labels in customization based on the template

4. **Dashboard**
    - Add a new sheet
    - Name it Dashboard
    - Select all the chart that you created
    - copy it one by one
    - paste it in the Dashboard sheet
\n
Congrats kuys! tapos kana sa lahat ng modules lalo na sa dashboard!
`,
  "pivot": `Hi kuys!üëã A Pivot Table streamlines **data analysis** by summarizing and organizing large amounts of information **quickly and efficiently**. This is helpful to create CHARTS later
  Paano gawin: \n\n\n\n
  1. I-click yung buong sheet na **may mga sulat lang**.
  2. Pumunta sa **Insert**.
  3. Piliin ang **Pivot Table**, tapos **New Worksheet**. 
  5. Click **Create**
  6. Double click to edit
  \n Aral well kuys!`,
  "How can I prepare for oral validation":`Hi kuys!üëã, here's how to prepare for oral validation in MRP (Material Requirements Planning):  
\n
1. **Master the MRP Process Flow**: Understand how data moves from **MPS ‚Üí BOM ‚Üí Inventory ‚Üí PO ‚Üí Dashboard**. Be ready to explain each step.  
\n
2. **Practice Spreadsheet Skills**:  
   - Use formulas correctly (e.g., IFERROR) to calculate requirements.  
   - Link sheets (MPS, BOM, Inventory, PO) without errors.  
   - Format sheets neatly for readability.  
\n
3. **Create Reports**:  
   - Learn to make pivot tables, charts, and dashboards.  
   - Practice explaining insights from these visuals.  
\n
4. **Simulate the Full Workflow**: Integrate all sheets and validate data accuracy.  
\n
5. **Practice Oral Explanation**:  
   - Clearly explain your logic and steps in updating the workbook.  
   - Be ready to answer questions about formulas, formatting, and results.  
\n
Kuys, focus on understanding the *why* and *how* of each step! üìä‚ú®  
Kuys, need more help? Just ask! üòä`,
  "Data connection between sheets": `Hi kuys!üëã **How data flows between MPS, BOM, Inventory, and Purchase Orders**  
In the Material Requirements Planning (MRP) system, the data connection between sheets ensures seamless communication and integration across different stages of production and inventory management. Here‚Äôs a detailed breakdown of how the sheets are connected:

\n
üìå **STEP 1 ‚Äî MPS (Master Production Schedule)**  
\n
In MPS you should base on the last week, there are two types of quantity:  
- **Planned Qty** ‚Üí the target production (what you plan to make)  
- **Actual Qty** ‚Üí the quantity actually produced or approved for production  
\n
‚Üí The **Actual Qty** is the basis that will be passed on to the BOM.  
\n
Example in MPS:  
Product: Trainer Board  
Planned Qty: 100  
Actual Qty: 90 (this is what will be used)  
\n
‚Üí The **Actual Qty** is used by BOM to compute required materials.  
\n
üìå **STEP 2 ‚Äî BOM (Bill of Materials)**  
\n
BOM lists all parts/components needed per product.  
\n
Example in BOM:  
Component: Resistor  
Qty per item (based on the specification): 5 pcs  
\n
MPS Actual Qty = 90 units  
Qty = 90 √ó 5 = **450 pcs**  
\n
‚Üí BOM uses the **Actual Qty from MPS** to calculate total component requirements.  
\n
üìå **STEP 3 ‚Äî Inventory**  
\n
Inventory compares the required quantity (from BOM) vs. stock on hand.  
\n
Example in Inventory:  
Beginning Balance = 300 pcs  
Required from BOM = 450 pcs 
\n
‚Üí Inventory detects the shortage using formulas
\n
üìå **STEP 4 ‚Äî PO (Purchase Order)**  
\n
If there is a shortage in Inventory, a PO is generated.  
\n
Example in PO:  
Item: Resistor  
Qty Ordered: **150 pcs**  
Supplier: Kaizenset Electronics  
\n
When the items arrive:  
‚Üí They are entered in **Qty IN** in Inventory  
‚Üí **Ending Balance** is recalculated automatically.  

\n
üü¶ **SUMMARY (to avoid confusion):**  
\n
<table border="1">
  <thead>
    <tr>
      <th>Sheet</th>
      <th>Input from Previous Sheet</th>
      <th>Output Sent to Next Sheet</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>MPS</td>
      <td>Planned / Actual Qty</td>
      <td>Actual Qty ‚Üí BOM</td>
    </tr>
    <tr>
      <td>BOM</td>
      <td>Actual Qty (from MPS)</td>
      <td>Component Requirements ‚Üí Inventory</td>
    </tr>
    <tr>
      <td>Inventory</td>
      <td>Required Qty (from BOM)</td>
      <td>Shortage Qty ‚Üí PO</td>
    </tr>
    <tr>
      <td>PO</td>
      <td>Shortage Qty (from Inventory)</td>
      <td>Qty IN ‚Üí Inventory update</td>
    </tr>
  </tbody>
</table>
\n
üéØ **Main Concept:**  
\n
> **Whatever quantity is finalized in MPS becomes the basis of computation in BOM.  
> Whatever material requirement is computed in BOM becomes the basis for checking stock in Inventory.  
> Whatever shortage is detected in Inventory becomes the basis for the Purchase Order.**  
\n`,
  "Three types of data": `Hi kuys!üëãIn the Material Requirements Planning (MRP) system, the three types of data processes; data visualization, data manipulation, and data analysis plays crucial roles in creating the MRP as it is the basis on how each sheet connects
\n
 **Types of Data:**
\n
1. **Data Manipulation** - Involves organizing and modifying data using spreadsheet functions and formulas to ensure accuracy and consistency across the MRP system.
2. **Data Analyzation** - Focuses on interpreting and summarizing data to extract meaningful insights for decision-making, by using pivot table.
3. **Data Visualization** - Helps present data in a visual format, such as charts and dashboards, to make trends, comparisons, and insights easier to understand.
`,
  "References": `Hi kuys!üëã, to find the resources, click the **program** > **google classroom**
\n*Kuys, tignan mo yung header natin, tapos sa header, hanapin mo yung **Program**. Pag nakita mo na, i-click mo yung **Google Classroom**.*
\n
**If not found please click here according to your need:**
1. **[MATERIAL_REQUIREMENTS_PLANNING_20251023](https://docs.google.com/spreadsheets/d/1y-9QnNwmhOlyjKYf9uaHA5Q4IAy2ANOs/edit?gid=506882268#gid=506882268)**
2. **[ICTDP_PerformanceChecklist](https://docs.google.com/document/d/1mT_NOVLIrPwj0j-V15a1efY-lLXr5Axe/edit)**
3. **[ICTDP_Module_Structure_v2](https://docs.google.com/document/d/1qSm3xFtBFx-AjqxMeWa5ezkMbM7eLQqf/edit)**
4. **[ICTDP_CBLM_Material_Requirement_Plan](https://docs.google.com/document/d/1MVgh48bu-ZktfSaGXjjlR3YdmR8Po6cp/edit)**
5. **[HOUSE R.U.L.E.S](https://docs.google.com/document/d/1TZz8CO69iAF-9vPXgA3spmm-BtpEnnQZ3m_9Z3DFmtM/edit?usp=drive_link)**
6. **[Story: The Flow of Data Through the MRP System](https://docs.google.com/document/d/1ULRv2mg6SUS5LoIe7TLq9VhSenhcA2wPAAmIx6KFP-E/edit?tab=t.0#heading=h.cbftajuzahgw)**
7. **[ICTDP_Orientation_Flow_and_Script](https://docs.google.com/document/d/1HHZM2zfb98M6LV6x_EjpIMr7aUTEdG2gJ-zrEaq5J-Q/edit?tab=t.0)**
8. **[ICTDP_ManualWorkflowProcedure](https://docs.google.com/document/d/1fujX8feo6hE_XFAfuTD0GUVsF44eIPJPI5-LLdWyePg/edit?tab=t.0)**
9. **[MRP_CBLM_Module1_v5a](https://docs.google.com/document/d/1X3f4ADqU1PH8zAFyu-8uKYGElBp4Pv6a/edit?rtpof=true&tab=t.0)**
10. **[MRP_CBLM_Module2_v7a](https://docs.google.com/document/d/167El0U3ZzflufO5kzhORlX8QSDPDolWJ/edit?rtpof=true&tab=t.0)**
11. **[MRP_CBLM_Module3_v1a](https://docs.google.com/document/d/11GaW0TpsAvPxIweMPLmmm3sjFVKN4Hnn/edit#heading=h.stdfr3j453vw)**
12. **[ICTDP_Summary_Rubrics_v3](https://docs.google.com/document/d/1lIIc5dBTBvm33_sG_4dpz0UFXSZ5BSOiSZ_rDff4TFA/edit?tab=t.0#heading=h.560mphxggfmp)**
13. **[ICTDP_MRP_Thesis](https://docs.google.com/document/d/1UDgB-Em5vdru6pNax_fag0Rs528clRn7lt7BgVxfL3Q/edit?tab=t.0)**
14. **[Downloadble EDITABLE SPREEDSHEET(FREE!!! CLICK ME!!! NOW!!!](https://docs.google.com/spreadsheets/d/1HRQK3lJD_GUDZT2ExWX5W_QboVbHsU2X/edit?gid=677970753#gid=677970753)**
\n
**Form submision & quiz Links:**
1. **[Registration](https://docs.google.com/forms/d/e/1FAIpQLScqElds2odcKxVAb4h4-qnC7JxK2UWocsjHYOHu5Ob2J5Yv5A/viewform)**
2. **[Module 1](https://docs.google.com/forms/d/e/1FAIpQLSeIsO_7TlYWT8i6hXBVmTw6-3UFH8kYQ3ipll0lC9KxvOwOFg/viewform)**
3. **[Module 2](https://docs.google.com/forms/d/e/1FAIpQLScMn2q_BgZrUmJdSQyRqhiHcKNmDY7uxbWg07CZ1G7zajyC8w/viewform?usp=header)**
4. **[Module 3](https://docs.google.com/forms/d/e/1FAIpQLSexDGWOZ6CLnjh7WbItGeeShHdwzLGgUBa8m0B81_AeNSLOmw/viewform)**
5. **[Completion Assessment Form](https://docs.google.com/forms/d/1S3P8vaLIJ4qsgMCI9x2TEGsW2enUFgthzEY3H51eEM8/viewform?edit_requested=true)**
`,
"Main developer of AILA?": `Hi kuys!üëã, The main programmer, Full stack dev of AILA is **[Joshua M. Narvasa](https://web.facebook.com/Jomong.things)**
\n**Made this User Interface:**
- As a Full stack developer
*Tools used:*
  - Front End:
    - HTML
    - CSS
    - JS
  - Back End:
    - N8N workflow
    - Pinecone "LLM Assistant"
    - Supabase "database"
  `,
// module questions area // 
  "module 1": `Hi kuys!üëã here's:
**[MRP_CBLM_Module1_v5a](https://docs.google.com/document/d/1X3f4ADqU1PH8zAFyu-8uKYGElBp4Pv6a/edit?rtpof=true&tab=t.0)**
Module 1: Understanding the MRP System is your foundation for learning Material Requirement Planning! Here's what it covers:
\n
**Duration:** 1 hour
**Competency:** Data Manipulation and Analyzation
**Level:** 3 (controlled educational/demonstration)
\n
**Learning Objectives:**
- Identify data relationships and flow in MRP spreadsheets
- Demonstrate interaction between MPS, BOM, Inventory, and Purchase Orders
- Explain how spreadsheet formulas support MRP decisions
- Interpret KPIs from the Dashboard
\n
**Key Terms You'll Learn:**
- **MRP:** System for calculating materials needed for production
- **MPS:** Master Production Schedule - what to make and when
- **BOM:** Bill of Materials - list of components needed
- **Inventory:** Materials on hand and available
- **Lead Time:** Time between ordering and receiving materials
- **Safety Stock:** Extra inventory to prevent shortages
- **Reorder Point:** When to order new stock
- **Purchase Order:** Formal request to suppliers
- **Dashboard:** Visual summary of performance indicators
\n
**The MRP Data Cycle:**
You'll work through a real example - like a client ordering 12 Mechatronics Trainer Boards. The order drives the MPS, which feeds into BOM calculations. Inventory checks material availability, and if needed, Purchase Orders are created. The Dashboard tracks everything and provides insights for better planning.
\n
**Activity:**
You'll analyze the MRP workbook by identifying the purpose of each tab (MPS, BOM, Inventory, Purchase Orders, Dashboard) and how data flows between them.
\n
This module prepares you for deeper MRP applications in the next modules! üìä
\n**[Module 1 Assesment form](https://docs.google.com/forms/d/e/1FAIpQLSeIsO_7TlYWT8i6hXBVmTw6-3UFH8kYQ3ipll0lC9KxvOwOFg/viewform)**
`,
  "How to transfer between modules": `Hi kuys!üëã To transfer between MRP modules, you need to complete the current module first through:
\n
1. **Finish all activities** - Complete all required tasks, quizzes, and outputs for your current module
2. **Pass oral validation** - Learning Assistants will assess your understanding through questioning
3. **Submit outputs** - Hand in your activity sheets and required deliverables  
4. **Get approval** - Once validated, you can proceed to the next module
\n
The modules build on each other:
- Module 1 ‚Üí Module 2: Focus moves from theory to hands-on spreadsheet work
- Module 2 ‚Üí Module 3: Advanced analysis and dashboard creation
- Module 3 ‚Üí Final Presentation: Last and final step after you've finished all modules
\n
Make sure to master each module before moving forward! üìö`,
  "module 2":`Hi kuys!üëã here's:
**[MRP_CBLM_Module2_v7a](https://docs.google.com/document/d/167El0U3ZzflufO5kzhORlX8QSDPDolWJ/edit?rtpof=true&tab=t.0)**
Module 2 is all about working with Material Requirement Planning (MRP) data using spreadsheets! üìä
\n
**Key points:**
- **Duration:** 1 hour (Level 3)
- **Focus:** Spreadsheet-based MRP simulation
- **Main competency:** Data manipulation across different sheets
\n
**What you'll learn:**
- Working with Master Production Schedule (MPS), Bill of Materials (BOM), Inventory, and Purchase Orders
- Applying spreadsheet formulas and formatting for consistency
- Maintaining an audit-ready workbook
\n
**Main activity:**
You'll get a case scenario where a client orders 12 Mechatronics Trainer Boards for delivery in 4 weeks. You need to:
- Set weekly production plans in **MPS**
- Compute material requirements in **BOM**
- Update stock movement in **Inventory**
- Record supplier details and costs in **Purchase Orders**
\n
**Skills covered:**
- Excel tools: Freeze Panes, Filters, Wrap Text, Conditional Formatting
- Lookup functions (XLOOKUP/VLOOKUP)
- Logical formulas (IF statements)
- Summation formulas (SUMIF)
- Basic arithmetic for stock balance calculations
\n
The module prepares you for handling real MRP data used in planning, production, and procurement! üõ†Ô∏è
**[Free editable workbook here](https://docs.google.com/spreadsheets/d/1HRQK3lJD_GUDZT2ExWX5W_QboVbHsU2X/edit?gid=677970753#gid=677970753)**
\n**[Module 2 Assesment Form](https://docs.google.com/forms/d/e/1FAIpQLScMn2q_BgZrUmJdSQyRqhiHcKNmDY7uxbWg07CZ1G7zajyC8w/viewform?usp=header)**
`,
  "module 3": `Hi kuys!üëã here's:
  **[MRP_CBLM_Module3_v1a](https://docs.google.com/document/d/11GaW0TpsAvPxIweMPLmmm3sjFVKN4Hnn/edit#heading=h.stdfr3j453vw)**
  \nModule 3 is all about **Data Analysis and Visualization** in MRP! 
  üìä\n**Key points:** 
  \n- **Duration:**: 1-2hours 
  \n- **Focus:** Data sheets and tables 
  \n- **Main competency:** Data Visualization and Data Analyzation
  \n\nHere's what you'll learn:
  \n\n**Main Focus:** Analyzing and visualizing MRP data to help production and procurement decisions.
  \n\n**Key Topics:**\n- Creating pivot tables from MRP data (Inventory, Purchase Orders, Master Production Schedule)
  \n- Building charts and dashboards to show supplier performance, production progress, and material costs\n- Interpreting reports to find trends and areas for improvement\n\n**Activities You'll Do:**\n- Summarize MRP workbook data with pivot tables\n- Create charts showing supplier performance (lead time vs cost, etc.)\n- Build dashboards that visualize production output vs plan and inventory status\n\n**Assessment Criteria:**\n- Pivot table accuracy\n- Chart design and data representation\n- Dashboard integration and presentation\n- Analytical interpretation of results\n\nThis module helps management monitor important data like lead time, costs, and fulfillment rates to make better decisions for continuous improvement! üòä",
\n**[Module 3 Assesment Form](https://docs.google.com/forms/d/e/1FAIpQLSexDGWOZ6CLnjh7WbItGeeShHdwzLGgUBa8m0B81_AeNSLOmw/viewform)**
`,
"add more": "addmore",
};

const messagesEl = document.getElementById('messages');
const input = document.getElementById('input');
const sendBtn = document.getElementById('sendBtn');
const logoArea = document.getElementById('logo');

/* Marked + DOMPurify */
marked.setOptions({ breaks: true, gfm: true });
function renderSafeMarkdown(mdText) {
  if (typeof mdText !== 'string') mdText = String(mdText || '');
  const urlRx = /(\b(https?:\/\/|www\.)[^\s<>()]+)/gi;
  const pre = mdText.replace(urlRx, (m)=>{ if (m.startsWith('<') && m.endsWith('>')) return m; return `<${m}>`; });
  const raw = marked.parse(pre);
  return DOMPurify.sanitize(raw, { ADD_ATTR: ['target','rel','style'] });
}
/* welcome logo */
/* welcome screen*/
function showWelcomeScreen() {
  const welcomeHTML = `
    <div class="welcome-screen">
      <div class="welcome-logo">
        <div style="width:150%;height:150%;border-radius:20px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center">
          <img src="https://i.postimg.cc/3rG4DBFN/ailalogo.png" alt="Voluntarians Logo" style="width:120px;height:120px;border-radius:12px;display:flex;">
        </div>
      <linearGradient id="blueGreenGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="blue" />
      <stop offset="100%" stop-color="green" />
    </linearGradient>
  </defs>                                   
          <rect x="12" y="12" width="60px" height="60px" rx="8" fill="url(#blueGreenGradient)" stroke="url(#welcomeG)" stroke-width="2" opacity="0.12"/>
          <g stroke="url(#welcomeG)" stroke-width="1.6" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path d="M24 32h6" stroke-dasharray="20" stroke-dashoffset="20">
              <animate attributeName="stroke-dash  offset" from="20" to="0" dur="1.6s" repeatCount="indefinite"/>
            </path>
            <path d="M38 32h-6" stroke-dasharray="20" stroke-dashoffset="20">
              <animate attributeName="stroke-dashoffset" from="20" to="0" dur="1.6s" repeatCount="indefinite" begin="0.15s"/>
            </path>
            <circle cx="32" cy="24" r="2.6" fill="url(#welcomeG)">
              <animate attributeName="r" values="2.6;3.8;2.6" dur="1.6s" repeatCount="indefinite"/>
            </circle>
          </g>
      </div>
      
      <h1 class="welcome-title">Welcome to AILA</h1>
      <p class="welcome-subtitle">Hi kuys! I'm AILA, Feel free to ask any questions related to our Kaizenset ICT Data Processing</p>
      
      <div class="welcome-actions">
        <button class="welcome-btn" onclick="useSuggestion('Who is AILA?')">Who is AILA?</button>
        <button class="welcome-btn" onclick="useSuggestion('Who made AILA')">Who made AILA?</button>
        <button class="welcome-btn" onclick="useSuggestion('Hi')">Hi</button>
        <button class="welcome-btn" onclick="useSuggestion('Orientation to data processing')">Oriention to data processing</button>
      </div>
  `;

  messagesEl.innerHTML = welcomeHTML;
  const welcomeInput = document.getElementById('welcomeInput');
  welcomeInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      const value = welcomeInput.value.trim();
      if (value) {
        useSuggestion(value);
      }
    }
  });
  welcomeInput.focus();
}

function useSuggestion(text) {
  messagesEl.innerHTML = '';
  appendMessage(text, 'user');
  sendToBackend(text, true);
}

function appendMessage(text, who='bot', attachFAQs=false, suggestions=[]) {
  const wrap = document.createElement('div');
  wrap.className = 'msg ' + who;
  wrap.innerHTML = renderSafeMarkdown(text);
  wrap.querySelectorAll('a').forEach(a => {
    a.setAttribute('target','_blank');
    a.setAttribute('rel','noopener noreferrer');
  });

  if (who === 'bot') {
    const actionWrap = document.createElement('div');
    actionWrap.className = 'sugg-buttons';

    const dropdownContainer = document.createElement('div');
    dropdownContainer.style.position = 'relative';
    dropdownContainer.style.display = 'inline-block';
    dropdownContainer.style.marginRight = '8px';

    const dropdownBtn = document.createElement('button');
    dropdownBtn.className = 'sugg-btn';
    dropdownBtn.textContent = 'üìã Quick Actions';
    dropdownBtn.style.position = 'relative';

    const dropdownContent = document.createElement('div');
    dropdownContent.style.position = 'absolute';
    dropdownContent.style.top = '100%';
    dropdownContent.style.left = '0';
    dropdownContent.style.display = 'none';
    dropdownContent.style.minWidth = '240px';
    dropdownContent.style.background = 'linear-gradient(180deg, var(--glass-2), rgba(255,255,255,0.006))';
    dropdownContent.style.border = '1px solid rgba(255,255,255,0.03)';
    dropdownContent.style.borderRadius = '10px';
    dropdownContent.style.boxShadow = '0 8px 25px rgba(0,0,0,0.3)';
    dropdownContent.style.padding = '8px';
    dropdownContent.style.marginTop = '4px';
    dropdownContent.style.zIndex = '9999';
    dropdownContent.style.maxWidth = '300px';

    // templated questions and buttons section
    const faqSection = document.createElement('div');
    faqSection.style.marginBottom = '8px';
    // show up buttons
    // suggestion button area
    const faqToggleBtn = document.createElement('button');
    faqToggleBtn.className = 'dropdown-item sugg-btn';
    faqToggleBtn.textContent = 'üìö Click here kuys!';
    faqToggleBtn.style.width = '100%';
    faqToggleBtn.style.marginBottom = '4px';

    const faqDiv = document.createElement('div');
    faqDiv.className = 'faq-buttons';
    faqDiv.style.display = 'none';
    faqDiv.style.flexWrap = 'wrap';
    faqDiv.style.gap = '4px';
    faqDiv.style.marginTop = '4px';
    faqDiv.style.maxHeight = '200px';
    faqDiv.style.overflowY = 'auto';

    faqs.forEach(q => {
      const fb = document.createElement('button');
      fb.className = 'faq-btn';
      fb.textContent = q;
      fb.style.fontSize = '12px';
      fb.style.padding = '6px 8px';
      fb.addEventListener('click', () => onFaqClick(fb, q));
      faqDiv.appendChild(fb);
    });
    const moduleSection = document.createElement('div');
    moduleSection.style.marginBottom = '8px';
    
    // module button area
    const moduleBtn = document.createElement('button');
    moduleBtn.className = 'dropdown-item sugg-btn';
    moduleBtn.textContent = 'üì¶ Modules';
    moduleBtn.style.width = '100%';
    moduleBtn.style.marginBottom = '1px';
    
    const moduleDiv = document.createElement('div');
    moduleDiv.className = 'faq-buttons';
    moduleDiv.style.display = 'none';
    moduleDiv.style.flexWrap = 'wrap';
    moduleDiv.style.gap = '4px';
    moduleDiv.style.marginTop = '4px';
    
    const module1Btn = document.createElement('button');
    module1Btn.className = 'faq-btn';
    module1Btn.textContent = 'Module 1: Understanding the MRP System';
    module1Btn.addEventListener('click', () => {
      appendMessage('Tell me about Module 1: Understanding the MRP System', 'user');
      sendToBackend('Tell me about Module 1', true);
      dropdownContent.style.display = 'none';
    });
    
    const module2Btn = document.createElement('button');
    module2Btn.className = 'faq-btn';
    module2Btn.textContent = 'Module 2: Working with MRP Data Using Spreadsheet';
    module2Btn.addEventListener('click', () => {
      appendMessage('Tell me about Module 2: Working with MRP Data Using Spreadsheet', 'user');
      sendToBackend('Tell me about Module 2', true);
      dropdownContent.style.display = 'none';
    });
    
    const module3Btn = document.createElement('button');
    module3Btn.className = 'faq-btn';
    module3Btn.textContent = 'Module 3: Data Analysis and Visualization';
    module3Btn.addEventListener('click', () => {
      appendMessage('Tell me about Module 3: Data Analysis and Visualization', 'user');
      sendToBackend('Tell me about Module 3', true);
      dropdownContent.style.display = 'none';
    });

     const transmoduleBtn = document.createElement('button');
    transmoduleBtn.className = 'faq-btn';
    transmoduleBtn.textContent = 'Transfer Between Modules';
    transmoduleBtn.addEventListener('click', () => {
      appendMessage('How to transfer between modules', 'user');
      sendToBackend('How to transfer between modules', true);
      dropdownContent.style.display = 'none';
    });
    
    const orientBtn = document.createElement('button');
    orientBtn.className = 'faq-btn';
    orientBtn.textContent = 'üìä Orientation to Data Processing';
    orientBtn.addEventListener('click', () => {
      const orientationText = "Orientation to data processing";
      appendMessage(orientationText, 'user');
      sendToBackend(orientationText, true);
      dropdownContent.style.display = 'none';
    });
    
    moduleDiv.appendChild(module1Btn);
    moduleDiv.appendChild(module2Btn);
    moduleDiv.appendChild(module3Btn);
    moduleDiv.appendChild(transmoduleBtn);
    moduleDiv.appendChild(orientBtn);

    faqToggleBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      const isVisible = faqDiv.style.display === 'flex';
      faqDiv.style.display = isVisible ? 'none' : 'flex';
      if (!isVisible) moduleDiv.style.display = 'none';
    });

    moduleBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      const isVisible = moduleDiv.style.display === 'flex';
      moduleDiv.style.display = isVisible ? 'none' : 'flex';
      if (!isVisible) faqDiv.style.display = 'none';
    });

    faqSection.appendChild(faqToggleBtn);
    faqSection.appendChild(faqDiv);
    
    moduleSection.appendChild(moduleBtn);
    moduleSection.appendChild(moduleDiv);

    dropdownContent.appendChild(faqSection);
    dropdownContent.appendChild(moduleSection);

    dropdownContainer.appendChild(dropdownBtn);
    dropdownContainer.appendChild(dropdownContent);

    actionWrap.appendChild(dropdownContainer);
    wrap.appendChild(actionWrap);

    setTimeout(() => {
      let isDropdownOpen = false;

      dropdownBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        isDropdownOpen = !isDropdownOpen;
        dropdownContent.style.display = isDropdownOpen ? 'block' : 'none';
        
        if (!isDropdownOpen) {
          faqDiv.style.display = 'none';
          moduleDiv.style.display = 'none';
        }
      });

      document.addEventListener('click', () => {
        if (isDropdownOpen) {
          isDropdownOpen = false;
          dropdownContent.style.display = 'none';
          faqDiv.style.display = 'none';
          moduleDiv.style.display = 'none';
        }
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && isDropdownOpen) {
          isDropdownOpen = false;
          dropdownContent.style.display = 'none';
          faqDiv.style.display = 'none';
          moduleDiv.style.display = 'none';
        }
      });
    }, 100);
  }

  messagesEl.appendChild(wrap);
  messagesEl.scrollTop = messagesEl.scrollHeight;
  return wrap;
}

const safe = (fn) => { try { fn(); } catch(e) { console.warn('safe error', e); } };
safe(() => {
  document.addEventListener('click', (e) => {
    const open = document.querySelectorAll('.dropdown-content, .sugg-buttons .dropdown-content');
    open.forEach(c => {
      const rect = c.getBoundingClientRect();
      if (window.innerWidth <= 880 && !c.contains(e.target)) {
        c.style.display = 'none';
      }
    });
  });
});

(function setupAutoResize() {
  const ta = document.querySelector('textarea#input') || document.getElementById('input');
  if (!ta) return;
  const resize = () => {
    ta.style.height = 'auto';
    const max = Math.min(window.innerHeight * 0.35, 220);
    ta.style.height = Math.min(ta.scrollHeight, max) + 'px';
    setTimeout(()=> messagesEl.scrollTop = messagesEl.scrollHeight, 50);
  };
  ta.addEventListener('input', resize, { passive: true });
  window.addEventListener('resize', resize);
  resize();
})();

// google form feedback area
// make sure header feedback opens new tab and doesn't break on mobile
safe(() => {
  const fb = document.getElementById('feedbackBtn');
  if (fb) {
    fb.addEventListener('click', (e) => {
      e.preventDefault();
      fb.setAttribute('aria-busy', 'true');
      const original = fb.innerHTML;
      fb.innerHTML = '‚è≥';
      window.open('https://forms.gle/cNRtaUZBwDuPoUk77', '_blank'); // put your google form link here
      setTimeout(()=> { fb.innerHTML = original; fb.removeAttribute('aria-busy'); }, 900);
    });
  }
});

safe(() => {
  document.addEventListener('click', (e) => {
    const btn = e.target.closest('.sugg-btn') || e.target.closest('.dropdown-item');
    if (!btn) return;
    const content = btn.parentElement && btn.parentElement.querySelector('.dropdown-content');
    if (!content) return;
    if (window.innerWidth <= 880) {
      e.stopPropagation();
      const visible = content.style.display === 'block';
      content.style.display = visible ? 'none' : 'block';
      const first = content.querySelector('button, a');
      if (first) first.focus();
    }
  }, { passive: true });
});

function showTyping() {
  const t = document.createElement('div'); t.className = 'typing'; t.id = 'typingIndicator';
  t.innerHTML = '<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
  messagesEl.appendChild(t);
  messagesEl.scrollTop = messagesEl.scrollHeight;
  logoArea.classList.add('logo-glow');
}
function hideTyping() {
  const t = document.getElementById('typingIndicator'); if (t) t.remove();
  logoArea.classList.remove('logo-glow');
}

function onFaqClick(btn, question) {
  btn.classList.add('sending');
  setTimeout(()=> btn.classList.remove('sending'), 600);

  appendMessage(question, 'user');
  const parentFaq = btn.closest('.faq-buttons'); if (parentFaq) parentFaq.remove();

  sendToBackend(question, true);
}

/* send to backend; use offlineResponses if offline or network fails */
function sendToBackend(text, askSuggestions = false) {
  showTyping();
  const payload = { 
    message: text, 
    sessionId: 'guest_' + Date.now(), 
    name: 'Guest', 
    email: null, 
    askForSuggestions: !!askSuggestions 
  };

// a function where it get's answer when offline mode is triggered
  function getOfflineAnswer(q) {
    const foundKey = Object.keys(offlineResponses).find(k => 
      q.toLowerCase().includes(k.toLowerCase())
    );
    return foundKey ? offlineResponses[foundKey] : 
      `üî¥OFFLINE: 
      Kuys! tulog pa si AILA, click mo nalang yung button for more common questions.
      \n<h5>We're still looking forward to the day that the already-prepared online version (GISING NA SI AILA), gets approved, even if it comes with a small fee, because it will allow us to help more LA and incoming trainees in the future.</h5>
      \n- *AILA can still response in templated answers given below, CLICK THE BUTTON*
      `;
  }
// N8N fetch url
  fetch('https://laict.app.n8n.cloud/webhook/aila-chat', { // put your chatwebhook url here
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload)
  })
  .then(async res => {
    hideTyping();
    if (!res.ok) throw new Error('Network response not ok');
    const data = await res.json().catch(() => ({}));
    const reply = (data && data.reply)
      ? data.reply
      : getOfflineAnswer(text);

    const suggestions = Array.isArray(data?.suggestions)
      ? data.suggestions
      : generateSuggestionsFromBoth(text, reply);

    appendMessage(reply, 'bot', false, suggestions);
    pulseLogoOnce();
  })
  .catch(err => {
    hideTyping();
    console.warn('Offline mode triggered:', err);
    const reply = getOfflineAnswer(text);
    appendMessage(reply, 'bot', true); 
  });
}

function sendMessage() {
  const t = input.value.trim();
  if (!t) return;
  appendMessage(t,'user');
  input.value = '';
  sendToBackend(t, true);
}

function pulseLogoOnce() {
  logoArea.classList.add('logo-glow');
  setTimeout(()=> logoArea.classList.remove('logo-glow'), 1250);
}

sendBtn.addEventListener('click', sendMessage);
input.addEventListener('keydown', e => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); } });

showWelcomeScreen();

const ro = new MutationObserver(()=> messagesEl.scrollTop = messagesEl.scrollHeight);
ro.observe(messagesEl, { childList:true, subtree:true });

window.addEventListener('load', ()=> setTimeout(()=> input.focus(), 250));

</script>
</body>
</html>
<!--    END CREDITS:
        ¬© Joshua M. Narvasa 
        ¬© Freki
        ¬© narvasajoshua61@gmail.com

        IDEA BY:
        ¬© Kaiser
-->
